---
title: "An Exegesis of Advanced Normalization Tools (ANTs)"
author: Brian B. Avants, Nicholas J. Tustison, Hans J. Johnson & the ITK and registration community
bibliography: REFERENCES.bib
logo:    logo.jpg
output:
  pdf_document:
    toc: true
    highlight: zenburn
  beamer_presentation:
    toc: true
    fig_width: 7
    fig_height: 6
  html_document:
    toc: true
    theme: readable
  revealjs_presentation:
    pandoc_args: [ "--slide-level", "2" ]
    incremental: true
    widescreen: true
    smaller: false
    theme: sky
    transition: fade
    highlight: pygments
    center: true
    self_contained: false
  ioslides_presentation:
    css: atk.css
    incremental: false
    widescreen: true
    smaller: false
    fig_width: 5
---
# Background

Differentiable maps with differentiable inverse

Multivariate segmentation & registration

High-dimensional statistics in low-dimensional spaces

# General theory tunable to specific domains:  *no-free lunch*

##
![](https://raw.githubusercontent.com/stnava/ANTsDoc/master/ANTsTalk/figures/highresdiffeos.jpg)

# Use prior knowledge to broaden performance

##
![](./figures/species.jpg)

# Library for multivariate image registration, segmentation & statistics

##
![](./figures/ptbp2.png)

##
![](https://raw.githubusercontent.com/stnava/ANTsDoc/master/ANTsTalk/figures/antsatroposn4malf.png)

# *ITK+ANTs+R = ANTsR*

##
![](./figures/antsrex.jpg)

## How do we quantify _life span_ brain health in individuals and in populations?
![](./figures/lifebrains.jpg)


## How do we integrate modalities and organ systems?

need unbrain example here

## ANTs*R* $\rightarrow$ new insight via quantification

Good software should fade into the background ... however ... 

<span style="color:blue;">
 As is common in science, the first big breakthrough in our understanding ... 
 [came from] an improvement in measurement.
</span>
				
<span style="color:blue;">
> Daniel Kahnemann, *Thinking, Fast and Slow* (2011)
</span>


##
![](https://raw.githubusercontent.com/stnava/ANTsDoc/master/ANTsTalk/figures/antsvfreesurfer2.png)


##

<!-- syn example --> 

<div align="center"><iframe width="560" height="315" src="http://www.youtube.com/embed/3I9RcRtpOvw" frameborder="0" allowfullscreen></iframe></div>

[SyN video](http://www.youtube.com/embed/3I9RcRtpOvw)

## Theory + evaluation + reproducibility
![](./figures/reprregevex_sm.jpg)


## Tools you can use for imaging science

- Core developers:  *B. Avants, N. Tustison, H. J. Johnson, J. T. Duda*

- Many contributors, including users ...

- Multi-platform, multi-threaded C++ [stnava.github.io/ANTs](stnava.github.io/ANTs)

- Developed in conjunction with [http://www.itk.org/](http://www.itk.org/)

- R wrapping and extension [stnava.github.io/ANTsR](stnava.github.io/ANTsR)

- rapid development, regular testing $+$ many eyes $\rightarrow$ bugs are shallow

<img style="float: right" src="figures/penn.png" />
<img style="float: left" src="figures/picsl.jpg" />

##
![](https://raw.githubusercontent.com/stnava/ANTsDoc/master/ANTsTalk/figures/nick.jpg)

## A long history of research
![](./figures/lineage.jpg)


## Rigorous transformation definition is key 

ANTs and ITK are developed together: <span style="color:red;">see @Avants2014, @Tustison2013, @Tustison2010</span> and more ...

Key definitions

- physical space

- transformation definition aware of physical space

- optimization space consistent with above

- unit testing 

# Merit Badges

## bart
![](https://raw.githubusercontent.com/stnava/ANTsDoc/master/ANTsTalk/figures/bart.jpg)

## open source

built on ITK—probably the most well-vetted medical image analysis package
in the world  @AvantsITK

## competitions

- Klein 2009:  Brain Registration (ANTs)
- Murphy 2010:  Lung Registration (ANTs)
- SATA 2012:  Multi-Atlas Segmentation (ANTs+JointLabelFusion)
- SATA 2013:  Multi-Atlas Segmentation (ANTs+JointLabelFusion)
- BRATS 2013:  Multivariate Brain Segmentation (ANTsR)
- Yushkevich’s Hipp Atlas:  ( hippocampusubfield.com )
- TBA:  BOLD decoding (ANTsR) 
- Substantial work with DTI ( Camino developer in house )
- STACOM2014 ?

## papers

- registration : ANTs vs. everything else @Klein2009

- segmentation : Atropos vs. SPM, etc.

- bias correction : N4 vs N3

- cortical thickness : ANTs vs. FreeSurfer @Tustison2014d

- compatibility with R


# The stories behind ANTs development

(we can comment this out but I think it would be good to make some notes for posterity)

## Registration

## N4

* N3 (developed at the Montreal Neurological Institute) has been the gold standard for
bias correction---used in important projects such as ADNI

* N3 is a set of perl scripts that works natively with the MINC file format which we tried
to incorporate into an ANTs processing pipeline.

* We had so much trouble converting back and forth between ITK-compatible Nifti format and
MINC that Brian suggested we try to implement N3 in ITK.

* I had some experience with B-splines and added some other tweaks giving birth to N4.

## Atropos

* Similar to our experience with N3, we tried to incorporate FAST (from the FMRIB at Oxford)
into an ANTs processing pipeline.

* Phil (?) pointed out the difficulty of incorporating priors into FAST.

* Related, Brian went to a segmentation-related worksop at MICCAI and aired publicly his
disappointment that so much of what had been developed in the community over the last
20+ years has not been made publicly available.  "What's wrong with you people!"

* 3-tissue algorithm in ImageMath ---> multivariate, n-class Atropos

## 

![](https://raw.githubusercontent.com/stnava/ANTsDoc/master/ANTsTalk/figures/atropos.png)


## KellySlater --> KellyKapowski


# Components

## Software engineering

<!-- ants gource --> 

<div align="center"><iframe width="560" height="315" src="http://www.youtube.com/embed/7X61iBFDF1I" frameborder="0" allowfullscreen></iframe></div>

[ants gource](http://www.youtube.com/embed/7X61iBFDF1I)

# Analysis philosophy and published opinions

# Voodoo in voxel-based analysis

# Instrumentation bias in the use and evaluation of software

# Discussion

## Problems

There are several problems and shortcomings to this analysis.

- Customizable for specific problems but not too specific
- Latest theoretical advances in registration not yet wrapped for users

## Strengths

Some strengths include relatively few assumptions, a flexible
implementation and open-science approach.

## References {#reffont}

